<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Financial Overview - Access</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
    <link rel="icon" type="image/svg+xml" href="./favicon.svg">
    <link rel="stylesheet" href="./styles.css">
    <meta name="robots" content="noindex,nofollow,noarchive">
  </head>
  <body>
    <main class="container">
      <section class="card">
        <h1>Financial Overview</h1>
        <p>Please enter the password to view the overview and calendar.</p>
        <form id="access-form" class="form" autocomplete="off">
          <label for="password">Password</label>
          <input type="password" id="password" name="password" inputmode="text" placeholder="Enter password" required>
          <button type="submit">Unlock</button>
          <p id="error" class="error" role="alert" aria-live="polite" hidden>Incorrect password. Try again.</p>
        </form>
      </section>
      <footer class="foot">
      </footer>
    </main>
    <script>
      (function () {
        const PASSWORD = "hanfamily77";
        const STORAGE_KEY = "fml_overview_access_granted";

        function verify(p) {
          return (p || "").trim() === PASSWORD;
        }

        const form = document.getElementById('access-form');
        const input = document.getElementById('password');
        const errorEl = document.getElementById('error');

        // If already unlocked in this browser, go directly
        try {
          if (localStorage.getItem(STORAGE_KEY) === '1') {
            window.location.href = './calendar.html';
            return;
          }
        } catch (e) { /* ignore */ }

        form.addEventListener('submit', function (e) {
          e.preventDefault();
          const val = input.value;
          const submitBtn = form.querySelector('button[type="submit"]');
          
          // Show loading state
          submitBtn.disabled = true;
          submitBtn.textContent = 'Verifying...';
          
          // Simulate brief loading for better UX
          setTimeout(() => {
            if (verify(val)) {
              try { localStorage.setItem(STORAGE_KEY, '1'); } catch (e) {}
              submitBtn.textContent = 'Success!';
              setTimeout(() => {
                window.location.href = './calendar.html';
              }, 300);
            } else {
              submitBtn.disabled = false;
              submitBtn.textContent = 'Unlock';
              errorEl.hidden = false;
            }
          }, 500);
        });
      })();
    </script>
  </body>
  </html>


